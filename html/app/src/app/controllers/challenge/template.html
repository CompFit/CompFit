<div id="challenge">
    <challenges-sidebar></challenges-sidebar>
    <div class="container">
      <div class="topSection row" ng-show="challenge_selected">
          <div class="col-sm-12">
              <h3> {{challenge.task_name}} | {{challenge.task_type}} | {{days_left}} days left</h3>
              <h4> {{my_team.team_name}} vs. {{opponent_team.team_name}}</h4>
              <p> Each player will do <b ng-show="challenge.task_type=='Individual'">{{challenge.repetitions}}</b>
                  <b ng-show="challenge.task_type=='Group'">~{{(challenge.repetitions/my_team.players.length).toFixed(1)}}</b>
                  <b>{{challenge.units}}</b> of
                  <b>{{challenge.task_name}}</b>
                  from <b>{{challenge.start_date | date: 'shortDate'}}</b> to <b>{{challenge.end_date | date:'shortDate'}}</b>.
              </p>
          </div>
      </div>
      <div class="topSection" ng-show="!challenge_selected">
          <h2> Select a Challenge </h2>
      </div>
      <div class="bottomSection row" ng-show="challenge_selected">
          <div class="col-sm-6">
              <div class="panel panel-default">
                  <div class="panel-heading">{{my_team.team_name}}</div>
                  <table class="table">
                      <thead>
                          <tr>
                              <th>#</th>
                              <th>Player</th>
                              <th>{{challenge.units | capitalize}} Done</th>
                              <th>Progress</th>
                          </tr>
                      </thead>
                      <tfoot>
                          <tr>
                              <th></th>
                              <th>All Players</th>
                              <th>{{getProgressFraction('all_my_team')}}</th>
                              <th>{{getProgress('all_my_team')}}%</th>
                          </tr>
                      </tfoot>
                      <tbody class="table-body">
                          <tr data-progress="{{getProgress('my_team', $index)}}" ng-repeat="player in my_team.players track by $index">
                              <th scope="row"><div class="progress"></div>{{$index+1}}</th>
                              <td>{{player.username}}</td>
                              <td>{{getProgressFraction('my_team', $index)}}</td>
                              <td>{{getProgress('my_team', $index)}}%</td>
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>
          <div class="col-sm-6">
              <div class="panel panel-default">
                  <div class="panel-heading">{{opponent_team.team_name}}</div>
                  <table class="table">
                      <thead>
                          <tr>
                              <th>#</th>
                              <th>Player</th>
                              <th>{{challenge.units | capitalize}} Done</th>
                              <th>Progress</th>
                          </tr>
                      </thead>
                      <tfoot>
                          <tr>
                              <th></th>
                              <th>All Players</th>
                              <th>10/{{challenge.repetitions*opponent_team.players.length}}</th>
                              <th>56%</th>
                          </tr>
                      </tfoot>
                      <tbody>
                          <tr ng-repeat="player in opponent_team.players track by $index">
                              <th scope="row">{{$index+1}}</th>
                              <td>{{player.username}}</td>
                              <td>1/{{challenge.repetitions}}</td>
                              <td>17%</td>
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>
      </div>
      <create-challenge-modal id="createchallengemodal" title="New Challenge"/>
    </div>
</div>
